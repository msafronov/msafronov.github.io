import{p as C,o as e,h as T,x as g,F,T as d,b as L,B as A}from"./preact-_10.18.1-0.1.2.js";import{a as $,c as o,u as h,D as j,b as G,i as q,e as J,T as K,d as Q,f as V,g as U,h as X}from"./vendor-0.1.2.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();const b=$({portrait:!1}),S=t=>t.matches,x=t=>{const n=t.target;b.set({...b.get(),portrait:S(n)})},Y=t=>{t.addEventListener("change",x)},Z=t=>{t.removeEventListener("change",x)},ee=()=>{const t=window.matchMedia("(orientation: portrait)");return b.set({portrait:S(t)}),{subscribeDeviceEvents:()=>{Y(t)},unsubscribeDeviceEvents:()=>{Z(t)}}};const te=t=>(C(()=>{const{subscribeDeviceEvents:n,unsubscribeDeviceEvents:s}=ee();return n(),()=>{s()}},[]),t.children);const ne=t=>e("div",{className:"menu",children:e("div",{className:"menu__internal",children:t.children})});const v=t=>e("div",{className:o("menu__item",{[`menu__item_padding-top_${t.paddingTop}`]:t.paddingTop}),children:t.children});const se=t=>e("ul",{className:"menu__list",children:t.children});const re=t=>e("li",{className:"menu__list-item",children:t.children});const le=t=>e("div",{className:"menu__application-bar",children:t.children});const ie=()=>e("img",{src:"/hls-lint/icons/menu-bar-resizer.svg",className:"menu__resize-icon",alt:"Resize"});const ce=()=>e("img",{src:"/hls-lint/icons/github.png",className:"menu__github-icon",alt:"HLS Lint icon",width:"16",height:"16"});const l=({size:t="md",tag:n="span",weight:s,color:i,textDecoration:r,family:c,children:a,...M})=>e(n,{className:o("text",{[`text_size_${t}`]:t,[`text_weight_${s}`]:s,[`text_color_${i}`]:i,[`text_family_${c}`]:c,[`text_decoration_${r}`]:r}),...M,children:a}),oe=$([{title:"File"},{title:"Edit"},{title:"View"},{title:"Help"}]),w=t=>{let n=t.getHours(),s=t.getMinutes(),i=n>=12?"PM":"AM";return n=n%12,n=n||12,s=s<10?"0"+s:s,n+":"+s+" "+i},ae=()=>{const[t,n]=T(w(new Date));return C(()=>{const s=setInterval(()=>{n(w(new Date))},5e3);return()=>{clearInterval(s)}},[]),e(l,{weight:"bold",children:t})};const de=g(()=>{const t=h(oe),n=h(b),s=F(()=>n.portrait?t.slice(0,3):t,[n.portrait]);return e(ne,{children:[e(v,{children:[e("img",{src:"/hls-lint/icons/logo.svg",alt:"Logo"}),e(se,{children:s.map(i=>e(re,{children:e(l,{weight:"bold",children:i.title})}))})]}),e(v,{paddingTop:"sm",children:[e(ae,{}),e(ie,{}),e(l,{tag:"a",href:"https://github.com/msafronov/hls-lint",target:"blank",textDecoration:"none",color:"black",children:e(le,{children:[e(ce,{}),e(l,{weight:"bold",children:"HLS Lint"})]})})]})]})});const he=t=>e("div",{className:"container",children:t.children});const p=t=>e("div",{className:"container__item",children:t.children});const B=t=>e("div",{className:o("window",{[`window_size_${t.size}`]:t.size}),children:e("div",{class:"window__internal",children:t.children})});const H=t=>e("div",{className:"window__title-bar",children:t.children});const P=t=>e("div",{className:"window__title-bar-title",children:t.children});const y=()=>e("div",{className:"window__title-bar-horizontal-bars",children:[e("div",{className:"window__title-bar-horizontal-bar window__title-bar-horizontal-bar_left"}),e("div",{className:"window__title-bar-horizontal-bar window__title-bar-horizontal-bar_right"})]});const k=t=>e("img",{className:"window__title-bar-close-icon",src:"/hls-lint/icons/close-window.svg",alt:"Close",onClick:t.onClick});const E=t=>e("img",{className:"window__title-bar-collapse-icon",src:"/hls-lint/icons/collapse-window.svg",alt:"Collapse",onClick:t.onClick});const R=t=>e("div",{className:"window__content",children:t.children});const ue=t=>e("div",{className:"window__content-header",children:e("div",{className:"window__content-header-internal",children:t.children})});const I=t=>e("div",{className:"window__content-body",children:t.children});const me=t=>e("div",{className:"window__footer",children:t.children}),_e=g(()=>{const t=d(()=>{},[]),n=d(()=>{},[]);return e(H,{children:[e(k,{onClick:t}),e(y,{}),e(P,{children:e(l,{weight:"bold",children:"HLS Lint"})}),e(y,{}),e(E,{onClick:n})]})}),be=()=>e(ue,{children:e(l,{size:"sm",children:["rfc8216 v13 (WIP: ",e(l,{tag:"a",color:"black",href:"https://github.com/msafronov/m3u8-composer/blob/main/docs/tags-and-attributes-support/rfc8216-v13.md",target:"blank",size:"sm",children:"see details"}),")"]})});const ye=t=>e("div",{className:"editor",children:t.children});const ge={width:"100%",fontFamily:"Garamond",fontSize:18},$e=t=>{const[n,s]=T(""),i=d(r=>{var a;const c=(a=r.target)==null?void 0:a.value;s(c),t.onChange(c)},[]);return e(j,{value:n,style:ge,spellcheck:!1,className:"editor__textarea",onChange:i,children:t.children})};const ve=t=>e("div",{className:o("editor__textarea-line",{"editor__textarea-line_error":t.error}),children:t.value||" "}),O={mediaSegments:[],variantStreams:[],playlist:{},metadata:{},errors:{},errorsCount:null},u=$({...O}),W=$(""),we=()=>{const t=G();q(W.get(),t),J(t);const n={};let s=0;Object.keys(t.logs).forEach(i=>{const r=t.logs[i];s++,n[r.row]===void 0?n[r.row]=[r]:n[r.row].push(r)}),u.set({...t,errors:n,errorsCount:s})},pe=()=>u.set({...O}),fe=t=>{W.set(t)},ze=()=>{const t=h(u),n=d(s=>{fe(s),pe()},[]);return e(I,{children:e(ye,{children:e($e,{onChange:n,children:s=>s.split(`
`).map((i,r)=>e(ve,{value:i,error:t.errors[r]!==void 0}))})})})},Ne=()=>e(R,{children:[e(be,{}),e(ze,{})]});const Ce=t=>e("button",{className:o("button","button_theme_primary",{[`button_size_${t.size}`]:t.size,disabled:t.disabled}),onClick:t.onClick,children:t.children}),Te=g(()=>e(me,{children:e(Ce,{onClick:we,theme:"primary",children:e(l,{weight:"bold",children:"Parse HLS Playlist"})})}));const Le=()=>e(B,{size:"md",children:[e(_e,{}),e(Ne,{}),e(Te,{})]}),Se=g(()=>{const t=d(()=>{},[]),n=d(()=>{},[]);return e(H,{children:[e(k,{onClick:t}),e(y,{}),e("img",{src:"/hls-lint/icons/analysis.svg",alt:"Result window icon"}),e(P,{children:e(l,{weight:"bold",children:"Result"})}),e(y,{}),e(E,{onClick:n})]})});const xe=t=>e(K,{className:"tabs",children:t.children});const f=t=>e(Q,{className:"tabs__tab",children:t.children});const Be=t=>e(V,{className:"tabs__tab-list",children:[e("div",{className:"tabs__tab-list-internal",children:" "}),t.children]});const z=t=>e(U,{className:"tabs__tab-panel",children:t.children});const He=t=>e(X,{className:"tabs__tab-panels",children:t.children});const Pe=t=>e("span",{className:o("badge",{[`badge_theme_${t.theme}`]:t.theme}),children:t.children});const ke=t=>e("div",{className:"errors",children:t.children});const D=t=>e("div",{className:"scroll-box",style:t.style,children:t.children});const Ee=t=>e("div",{className:"table",children:t.children});const Re=t=>e("div",{className:o("table__body-row",{"table__body-row_clickable":t.clickable}),children:t.children});const m=t=>e("div",{className:o("table__body-col",{[`table__body-col_size_${t.size}`]:t.size,"table__body-col_selected":t.selected,"table__body-col_centered":t.centered}),children:t.children});const Ie=t=>e("div",{className:"table__head-row",children:t.children});const _=t=>e("div",{className:o("table__head-col",{[`table__head-col_size_${t.size}`]:t.size}),children:e("div",{className:"table__head-col-internal",children:t.children})}),Oe=()=>{const t=h(u);return e(Ee,{children:e(L,{children:[e(Ie,{children:[e(_,{size:20,children:e(l,{family:"garamond",size:"lg",children:"Tag"})}),e(_,{size:10,children:e(l,{family:"garamond",size:"lg",children:"Row"})}),e(_,{size:10,children:e(l,{family:"garamond",size:"lg",children:"Col"})}),e(_,{size:20,children:e(l,{family:"garamond",size:"lg",children:"Value"})}),e(_,{size:40,children:e(l,{family:"garamond",size:"lg",children:"Text"})})]}),Object.values(t.errors).map(n=>n.map(s=>{var i;return e(Re,{children:[e(m,{size:20,selected:!0,children:e(l,{family:"garamond",size:"lg",children:s.relatesTo})}),e(m,{size:10,centered:!0,children:e(l,{family:"garamond",size:"lg",children:s.row})}),e(m,{size:10,centered:!0,children:e(l,{family:"garamond",size:"lg",children:s.col})}),e(m,{size:20,centered:!0,children:e(l,{family:"garamond",size:"lg",children:((i=s.value)==null?void 0:i.toString())||"-"})}),e(m,{size:40,children:e(l,{family:"garamond",size:"lg",children:s.message})})]})}))]})})},We={height:"40vh"},De=()=>e(ke,{children:e(D,{style:We,children:e(Oe,{})})});const Me=t=>e("div",{className:"data",children:t.children});const Fe=t=>e("pre",{className:"data__code",children:t.children}),Ae={height:"40vh"},je=()=>{const t=h(u);return e(Me,{children:e(D,{style:Ae,children:e(Fe,{children:e(l,{family:"garamond",size:"lg",children:JSON.stringify({main:t.metadata,playlist:t.playlist,variantStreams:t.variantStreams,mediaSegments:t.mediaSegments},null,4)})})})})},Ge=()=>{const t=h(u);return e(R,{children:e(I,{children:e(xe,{children:[e(Be,{children:[e(f,{children:e(L,{children:[e(l,{weight:"bold",children:"Errors"}),t.errorsCount!==null&&e(Pe,{theme:t.errorsCount===0?"success":"error",children:e(l,{size:"sm",color:"white",children:t.errorsCount})})]})}),e(f,{children:e(l,{weight:"bold",children:"Data"})})]}),e(He,{children:[e(z,{children:e(De,{})}),e(z,{children:e(je,{})})]})]})})})};const qe=()=>e(B,{size:"sm",children:[e(Se,{}),e(Ge,{})]});const Je=()=>e(he,{children:[e(p,{children:e(Le,{})}),e(p,{children:e(qe,{})})]});const Ke=()=>e(te,{children:[e(de,{}),e(Je,{})]});const N=document.getElementById("app");N!==null&&A(e(Ke,{}),N);
